# Step 1: Use an official Python image as base
FROM python:3.10-slim

# Step 2: Set work directory
WORKDIR /app

# Step 3: Copy all files
COPY . .

# Step 4: Install dependencies
RUN pip install --upgrade pip

# Assuming you have a requirements.txt (you can generate it)
COPY requirements.txt .
RUN pip install -r requirements.txt

# Step 5: Expose ports for FastAPI and Streamlit
EXPOSE 8000 8501

# Step 6: Start both FastAPI and Streamlit using a simple script
COPY start.sh /app/start.sh
RUN chmod +x /app/start.sh

CMD ["/app/start.sh"]
